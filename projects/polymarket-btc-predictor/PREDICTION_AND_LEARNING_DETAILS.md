# BTC预测系统预测频率与学习机制详解

## 预测频率

### 当前设置
- **预测生成频率**: 每分钟生成一次新预测
- **API访问频率**: 每次API调用返回最新预测
- **连续预测服务**: 后台每分钟自动运行一次预测循环

### 预测窗口
- **预测时间范围**: 15分钟内价格走势预测
- **观察窗口**: 预测后设定15分钟观察期以验证结果

## 预测复盘机制

### 复盘触发条件
- **并非每次预测都立即复盘**
- **只有当预测的15分钟观察窗口结束后**，且有实际结果数据时才会复盘
- **复盘需要知道实际价格变动**才能评估预测准确性

### 复盘流程
1. **预测生成** → 系统生成预测并设定15分钟观察期
2. **等待期** → 在15分钟内等待实际价格变动
3. **结果获取** → 获取实际价格变动数据
4. **准确性评估** → 比较预测方向与实际方向
5. **记录结果** → 将预测-实际结果对记录到学习日志
6. **策略分析** → 分析哪些指标对预测有帮助或有害

## 复盘频率

### 理论频率
- **最大复盘频率**: 每15分钟一次（基于预测窗口）
- **实际复盘频率**: 取决于是否获取到实际结果

### 自动复盘实现
我们已经实现了自动复盘调度器 (`auto_review_scheduler.py`)：
- **检查频率**: 每10分钟检查一次是否有到期的预测
- **自动获取价格**: 自动从币安获取当前BTC价格
- **确定实际方向**: 基于价格变动确定实际走势方向
- **记录结果**: 自动记录实际结果并触发学习过程

## 自我学习机制

### 学习触发条件
系统会在以下情况下自动调整策略：

1. **性能下降检测**:
   - 当近期准确率比整体准确率下降超过5%时
   - 自动调整技术指标权重

2. **连续错误检测**:
   - 连续5次预测错误后触发策略调整
   - 重新评估各指标的有效性

3. **连续正确检测**:
   - 连续10次预测正确后可能提高置信度阈值
   - 增强有效策略的权重

### 学习内容
- **技术指标权重调整**: 根据各指标的历史表现调整其在预测中的权重
- **情绪分析权重**: 根据情绪分析的有效性调整其比重
- **置信度阈值**: 动态调整发布预测所需的最小置信度
- **策略组合优化**: 优化不同分析方法的组合方式

### 学习频率
- **实时监控**: 系统持续监控预测表现
- **条件触发**: 满足特定条件时自动调整
- **非固定间隔**: 不是按固定时间调整，而是基于性能表现

## 实际操作流程

### 自动流程
1. 系统每分钟生成新预测
2. 15分钟后，自动复盘调度器获取实际价格
3. 确定实际走势并与预测对比
4. 记录结果并分析准确性
5. 当满足调整条件时，自动优化策略

### 当前状态
- **预测服务**: 正常运行，每分钟生成预测
- **复盘服务**: 自动复盘调度器准备就绪
- **学习服务**: 基于性能表现自动调整策略

## 优化建议

### 立即可用
- 所有组件均已部署并运行
- 自动复盘机制已实现
- 学习算法已集成

### 持续改进
- 系统会随着更多预测-结果对的积累而不断提升准确性
- 策略调整算法会根据市场变化自动适应
- 情绪分析会根据社交媒体数据的相关性进行优化

这个系统现在是一个完整的闭环：预测 → 等待结果 → 评估准确性 → 自我学习 → 优化策略 → 生成更好预测。